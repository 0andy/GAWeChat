{"remainingRequest":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@delon\\abc\\down-file\\down-file.directive.js","dependencies":[{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@delon\\abc\\down-file\\down-file.directive.js","mtime":1515671330000},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { Directive, ElementRef, Input, HostListener, EventEmitter, Output } from '@angular/core';\nimport { saveAs } from 'file-saver';\nimport { _HttpClient } from '@delon/theme';\n/**\n * 文件下载\n *\n * ```html\n * <button nz-button down-file http-url=\"assets/demo{{i}}\" file-name=\"demo中文\">{{i}}</button>\n * ```\n */\nvar DownFileDirective = /*@__PURE__*/ (function () {\n    function DownFileDirective(el, _http) {\n        this.el = el;\n        this._http = _http;\n        /** 请求类型 */\n        this.httpMethod = 'get';\n        /** 成功回调 */\n        this.success = new EventEmitter();\n        /** 错误回调 */\n        this.error = new EventEmitter();\n    }\n    DownFileDirective.prototype._click = function () {\n        var _this = this;\n        this.el.nativeElement.disabled = true;\n        this._http.request(this.httpMethod, this.httpUrl, {\n            params: this._http.parseParams(this.httpData || {}),\n            responseType: 'blob',\n            observe: 'response'\n        }).subscribe(function (res) {\n            if (res.body.size <= 0) {\n                _this.error.emit(res);\n                return;\n            }\n            var fileName = _this.fileName || res.headers.get('filename') || res.headers.get('x-filename');\n            saveAs(res.body, decodeURI(fileName));\n            _this.success.emit(res);\n            _this.el.nativeElement.disabled = false;\n        }, function (err) {\n            _this.error.emit(err);\n            _this.el.nativeElement.disabled = false;\n        });\n    };\n    return DownFileDirective;\n}());\nexport { DownFileDirective };\n//# sourceMappingURL=down-file.directive.js.map \n",null]}