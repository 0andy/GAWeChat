{"remainingRequest":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\angular-baidu-maps\\core\\loader.service.js","dependencies":[{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\angular-baidu-maps\\core\\loader.service.js","mtime":1509618914000},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { Injectable } from '@angular/core';\nimport { AbmConfig } from './abm.config';\nvar LoaderService = /*@__PURE__*/ (function () {\n    function LoaderService(cog) {\n        this._cog = Object.assign({\n            apiProtocol: 'auto',\n            apiVersion: '2.0',\n            apiCallback: 'angularBaiduMapsLoader',\n            apiHostAndPath: 'api.map.baidu.com/api'\n        }, cog);\n    }\n    LoaderService.prototype.load = function () {\n        var _this = this;\n        if (this._scriptLoadingPromise) {\n            return this._scriptLoadingPromise;\n        }\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n        script.defer = true;\n        script.src = this._getSrc();\n        this._scriptLoadingPromise = new Promise(function (resolve, reject) {\n            window[_this._cog.apiCallback] = function () { resolve(); };\n            script.onerror = function (error) { reject(error); };\n        });\n        document.body.appendChild(script);\n        return this._scriptLoadingPromise;\n    };\n    LoaderService.prototype._getSrc = function () {\n        var protocol;\n        switch (this._cog.apiProtocol) {\n            case 'http':\n                protocol = 'http:';\n                break;\n            case 'https':\n                protocol = 'https:';\n                break;\n            default:\n                protocol = '';\n                break;\n        }\n        var queryParams = {\n            v: this._cog.apiVersion,\n            ak: this._cog.apiKey,\n            callback: this._cog.apiCallback\n        };\n        var params = Object.keys(queryParams)\n            .filter(function (k) { return queryParams[k] != null; })\n            .filter(function (k) {\n            return !Array.isArray(queryParams[k]) || (Array.isArray(queryParams[k]) && queryParams[k].length > 0);\n        })\n            .map(function (k) {\n            var i = queryParams[k];\n            if (Array.isArray(i))\n                return { key: k, value: i.join(',') };\n            return { key: k, value: i };\n        })\n            .map(function (entry) { return entry.key + \"=\" + entry.value; })\n            .join('&');\n        return protocol + \"//\" + this._cog.apiHostAndPath + \"?\" + params;\n    };\n    return LoaderService;\n}());\nexport { LoaderService };\n//# sourceMappingURL=loader.service.js.map \n",null]}