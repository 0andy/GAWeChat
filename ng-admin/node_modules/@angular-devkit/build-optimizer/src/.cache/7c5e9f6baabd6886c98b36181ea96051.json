{"remainingRequest":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@delon\\abc\\full-content\\full-content.component.js","dependencies":[{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@delon\\abc\\full-content\\full-content.component.js","mtime":1515671330000},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { Component, ElementRef, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, Input, Output, EventEmitter, Inject, HostBinding } from '@angular/core';\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { DOCUMENT } from '@angular/platform-browser';\nimport { FromEventObservable } from 'rxjs/observable/FromEventObservable';\nimport { debounceTime, filter } from 'rxjs/operators';\nimport { FullContentService } from './full-content.service';\nimport { Router, ActivationStart, ActivationEnd } from '@angular/router';\nvar cls = \"full-content\";\nvar fsCls = \"full-content-fs\";\nvar hideTitleCls = \"full-content-ht\";\nvar FullContentComponent = (function () {\n    // endregion\n    function FullContentComponent(el, render, router, cd, srv, doc) {\n        this.el = el;\n        this.render = render;\n        this.router = router;\n        this.cd = cd;\n        this.srv = srv;\n        this.doc = doc;\n        this.inited = false;\n        this.id = \"_full-content-\" + Math.random().toString(36).substring(2);\n        this._height = 0;\n        this._hideTitle = true;\n        this._padding = 24;\n        this.fullscreenChange = new EventEmitter();\n        // region: resize\n        this.scroll$ = null;\n    }\n    Object.defineProperty(FullContentComponent.prototype, \"fullscreen\", {\n        get: \n        // region: fields\n        function () { return this._fullscreen; },\n        set: function (value) {\n            this._fullscreen = coerceBooleanProperty(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullContentComponent.prototype, \"hideTitle\", {\n        get: function () { return this._hideTitle; },\n        set: function (value) {\n            this._hideTitle = coerceBooleanProperty(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullContentComponent.prototype, \"padding\", {\n        get: function () { return this._padding; },\n        set: function (value) {\n            this._padding = coerceNumberProperty(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullContentComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        this.inited = true;\n        this.bodyEl = this.doc.querySelector('body');\n        this.bodyEl.classList.add(cls);\n        this.update();\n        this.installResizeEvent();\n        setTimeout(function () { return _this.updateHeight(); }, 100);\n        this.srv$ = this.srv.change.subscribe(function (res) {\n            if (res)\n                _this.toggle();\n        });\n        this.route$ = this.router.events.pipe(filter(function (e) { return e instanceof ActivationStart || e instanceof ActivationEnd; }), debounceTime(100)).subscribe(function (e) {\n            if (!!document.querySelector('#' + _this.id)) {\n                _this.bodyEl.classList.add(cls);\n                _this.updateFsCls();\n            }\n            else {\n                _this.bodyEl.classList.remove(cls, fsCls, hideTitleCls);\n            }\n        });\n    };\n    FullContentComponent.prototype.ngAfterViewInit = function () {\n    };\n    FullContentComponent.prototype.updateFsCls = function () {\n        if (this.fullscreen) {\n            this.bodyEl.classList.add(fsCls, this.hideTitle ? hideTitleCls : '');\n        }\n        else {\n            this.bodyEl.classList.remove(fsCls, this.hideTitle ? hideTitleCls : '');\n        }\n    };\n    FullContentComponent.prototype.update = function () {\n        this.updateFsCls();\n        this.fullscreenChange.emit(this.fullscreen);\n    };\n    FullContentComponent.prototype.updateHeight = function () {\n        this._height = this.bodyEl.getBoundingClientRect().height - this.el.nativeElement.getBoundingClientRect().top - this.padding;\n        this.cd.detectChanges();\n    };\n    FullContentComponent.prototype.toggle = function () {\n        this.fullscreen = !this.fullscreen;\n        this.update();\n        this.updateHeight();\n    };\n    FullContentComponent.prototype.ngOnChanges = function (changes) {\n        if (this.inited)\n            this.update();\n    };\n    FullContentComponent.prototype.ngOnDestroy = function () {\n        this.bodyEl.classList.remove(cls, fsCls, hideTitleCls);\n        this.uninstallResizeEvent();\n        if (this.srv$)\n            this.srv$.unsubscribe();\n        if (this.route$)\n            this.route$.unsubscribe();\n    };\n    FullContentComponent.prototype.installResizeEvent = function () {\n        var _this = this;\n        this.scroll$ = FromEventObservable.create(window, 'resize')\n            .pipe(debounceTime(200))\n            .subscribe(function () { return _this.updateHeight(); });\n    };\n    FullContentComponent.prototype.uninstallResizeEvent = function () {\n        if (this.scroll$)\n            this.scroll$.unsubscribe();\n    };\n    return FullContentComponent;\n}());\nexport { FullContentComponent };\n//# sourceMappingURL=full-content.component.js.map \n",null]}