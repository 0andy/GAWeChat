{"remainingRequest":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@delon\\abc\\error-collect\\error-collect.component.js","dependencies":[{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@delon\\abc\\error-collect\\error-collect.component.js","mtime":1515671330000},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":0},{"path":"D:\\mygit\\HCWeChat\\ng-admin\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { Component, Input, HostBinding, ElementRef, Renderer2, HostListener, Inject, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { DOCUMENT } from '@angular/platform-browser';\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\nvar ANTDERRORCLS = '.has-error';\nvar HEADERMINHEIGHT = 65 + 8 * 2;\n/**\n * 错误消息采集器\n * PS：虽然此法并不好看，但对响应式表单&模板表单有很好的效果。\n */\nvar ErrorCollectComponent = /*@__PURE__*/ (function () {\n    function ErrorCollectComponent(el, renderer, cd, doc) {\n        this.el = el;\n        this.renderer = renderer;\n        this.cd = cd;\n        this.doc = doc;\n        this.$time = null;\n        this._tick = 500;\n        this._hiden = true;\n        this.count = 0;\n    }\n    Object.defineProperty(ErrorCollectComponent.prototype, \"tick\", {\n        get: function () { return this._tick; },\n        set: function (value) {\n            this._tick = coerceNumberProperty(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ErrorCollectComponent.prototype.update = function () {\n        var count = this.formEl.querySelectorAll(ANTDERRORCLS).length;\n        if (count === this.count)\n            return;\n        this.count = count;\n        this._hiden = count === 0;\n        this.cd.markForCheck();\n    };\n    ErrorCollectComponent.prototype._click = function () {\n        if (this.count === 0)\n            return false;\n        // nz-form-item\n        var formItemEl = this.findParent(this.formEl.querySelector(ANTDERRORCLS), '[nz-form-item]');\n        if (!formItemEl)\n            formItemEl = this.formEl.querySelector(ANTDERRORCLS);\n        formItemEl.scrollIntoView(true);\n        // fix header height\n        this.doc.documentElement.scrollTop -= HEADERMINHEIGHT;\n    };\n    ErrorCollectComponent.prototype.install = function () {\n        var _this = this;\n        this.uninstall();\n        if (this.tick < 300)\n            this.tick = 300;\n        this.$time = setInterval(function () { return _this.update(); }, this.tick);\n    };\n    ErrorCollectComponent.prototype.uninstall = function () {\n        if (this.$time)\n            clearInterval(this.$time);\n    };\n    ErrorCollectComponent.prototype.findParent = function (el, selector) {\n        var retEl = null;\n        while (el) {\n            if (el.querySelector(selector)) {\n                retEl = el;\n                break;\n            }\n            el = el.parentElement;\n        }\n        return retEl;\n    };\n    ErrorCollectComponent.prototype.ngOnInit = function () {\n        this.formEl = this.findParent(this.el.nativeElement, 'form');\n        if (this.formEl === null)\n            throw new Error('未找到有效 form 元素');\n        this.el.nativeElement.classList.add('error-collect', 'pr-lg', 'text-error', 'point');\n        this.install();\n    };\n    ErrorCollectComponent.prototype.ngOnDestroy = function () {\n        this.uninstall();\n    };\n    return ErrorCollectComponent;\n}());\nexport { ErrorCollectComponent };\n//# sourceMappingURL=error-collect.component.js.map \n",null]}