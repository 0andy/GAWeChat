!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/http"),require("rxjs/Observable"),require("rxjs/add/operator/catch"),require("rxjs/add/operator/map")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/http","rxjs/Observable","rxjs/add/operator/catch","rxjs/add/operator/map"],t):t((e.ng=e.ng||{},e.ng.abpModule=e.ng.abpModule||{}),e.ng.core,e._angular_http,e.rxjs_Observable,e.rxjs_add_operator_catch,e.rxjs_add_operator_map)}(this,function(e,t,r,n,o,a){"use strict";function u(e,t,r){return new j(e,t,r)}var i=function(){function e(){}return Object.defineProperty(e.prototype,"userId",{get:function(){return abp.session.userId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tenantId",{get:function(){return abp.session.tenantId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"impersonatorUserId",{get:function(){return abp.session.impersonatorUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"impersonatorTenantId",{get:function(){return abp.session.impersonatorTenantId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiTenancySide",{get:function(){return abp.session.multiTenancySide},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),s=function(){function e(){}return e.prototype.isGranted=function(e){return abp.auth.isGranted(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),p=function(){function e(){}return e.prototype.get=function(e){return abp.features.get(e)},e.prototype.getValue=function(e){return abp.features.getValue(e)},e.prototype.isEnabled=function(e){return abp.features.isEnabled(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),c=function(){function e(){}return Object.defineProperty(e.prototype,"languages",{get:function(){return abp.localization.languages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLanguage",{get:function(){return abp.localization.currentLanguage},enumerable:!0,configurable:!0}),e.prototype.localize=function(e,t){return abp.localization.localize(e,t)},e.prototype.getSource=function(e){return abp.localization.getSource(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),l=function(){function e(){}return e.prototype.get=function(e){return abp.setting.get(e)},e.prototype.getBoolean=function(e){return abp.setting.getBoolean(e)},e.prototype.getInt=function(e){return abp.setting.getInt(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),f=function(){function e(){}return e.prototype.info=function(e,t,r){abp.notify.info(e,t,r)},e.prototype.success=function(e,t,r){abp.notify.success(e,t,r)},e.prototype.warn=function(e,t,r){abp.notify.warn(e,t,r)},e.prototype.error=function(e,t,r){abp.notify.error(e,t,r)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),d=function(){function e(){}return e.prototype.info=function(e,t){return abp.message.info(e,t)},e.prototype.success=function(e,t){return abp.message.success(e,t)},e.prototype.warn=function(e,t){return abp.message.warn(e,t)},e.prototype.error=function(e,t){return abp.message.error(e,t)},e.prototype.confirm=function(e,t,r){return"string"==typeof t?abp.message.confirm(e,t,r):abp.message.confirm(e,t)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),h=function(){function e(){}return e.prototype.debug=function(e){abp.log.debug(e)},e.prototype.info=function(e){abp.log.info(e)},e.prototype.warn=function(e){abp.log.warn(e)},e.prototype.error=function(e){abp.log.error(e)},e.prototype.fatal=function(e){abp.log.fatal(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),g=function(){function e(){}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return abp.multiTenancy.isEnabled},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),b=function(){function e(){}return e.prototype.getToken=function(){return abp.auth.getToken()},e.prototype.getTokenCookieName=function(){return abp.auth.tokenCookieName},e.prototype.clearToken=function(){abp.auth.clearToken()},e.prototype.setToken=function(e,t){abp.auth.setToken(e,t)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),y=function(){function e(){}return e.prototype.getCookieValue=function(e){return abp.utils.getCookieValue(e)},e.prototype.setCookieValue=function(e,t,r,n){abp.utils.setCookieValue(e,t,r,n)},e.prototype.deleteCookie=function(e,t){abp.utils.deleteCookie(e,t)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),m=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),v=function(){function e(e,t){this._messageService=e,this._logService=t,this.defaultError={message:"An error has occurred!",details:"Error detail not sent by server."},this.defaultError401={message:"You are not authenticated!",details:"You should be authenticated (sign in) in order to perform this operation."},this.defaultError403={message:"You are not authorized!",details:"You are not allowed to perform this operation."},this.defaultError404={message:"Resource not found!",details:"The resource requested could not found on the server."}}return e.prototype.logError=function(e){this._logService.error(e)},e.prototype.showError=function(e){return e.details?this._messageService.error(e.details,e.message||this.defaultError.message):this._messageService.error(e.message||this.defaultError.message)},e.prototype.handleTargetUrl=function(e){location.href=e||"/"},e.prototype.handleUnAuthorizedRequest=function(e,t){var r=this,n=this;e?e.done(function(){r.handleTargetUrl(t||"/")}):n.handleTargetUrl(t||"/")},e.prototype.handleNonAbpErrorResponse=function(e){var t=this;switch(e.status){case 401:t.handleUnAuthorizedRequest(t.showError(t.defaultError401),"/");break;case 403:t.showError(t.defaultError403);break;case 404:t.showError(t.defaultError404);break;default:t.showError(t.defaultError)}},e.prototype.handleAbpResponse=function(e,t){var n=new r.ResponseOptions({url:e.url,body:t,headers:e.headers,status:e.status,statusText:e.statusText,type:e.type});return t.success?(n.body=t.result,t.targetUrl&&this.handleTargetUrl(t.targetUrl)):(t.error||(t.error=this.defaultError),this.logError(t.error),this.showError(t.error),401===e.status&&this.handleUnAuthorizedRequest(null,t.targetUrl)),new r.Response(n)},e.prototype.getAbpAjaxResponseOrNull=function(e){if(!e||!e.headers)return null;var t=e.headers.get("Content-Type");if(!t)return this._logService.warn("Content-Type is not sent!"),null;if(t.indexOf("application/json")<0)return this._logService.warn("Content-Type is not application/json: "+t),null;var r=e.json();return r.__abp?r:null},e.prototype.handleResponse=function(e){var t=this.getAbpAjaxResponseOrNull(e);return null==t?e:this.handleAbpResponse(e,t)},e.prototype.handleError=function(e){var t=this.getAbpAjaxResponseOrNull(e);return null!=t?(this.handleAbpResponse(e,t),n.Observable.throw(t.error)):(this.handleNonAbpErrorResponse(e),n.Observable.throw("HTTP error: "+e.status+", "+e.statusText))},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:d},{type:h}]},e}(),j=function(e){function n(t,r,n){var o=e.call(this,t,r)||this;return o._tokenService=new b,o._utilsService=new y,o.configuration=n,o}return m(n,e),n.prototype.get=function(t,r){var n=this;return r||(r={}),this.normalizeRequestOptions(r),e.prototype.get.call(this,t,r).map(function(e){return n.configuration.handleResponse(e)}).catch(function(e){return n.configuration.handleError(e)})},n.prototype.post=function(t,r,n){var o=this;return n||(n={}),this.normalizeRequestOptions(n),e.prototype.post.call(this,t,r,n).map(function(e){return o.configuration.handleResponse(e)}).catch(function(e){return o.configuration.handleError(e)})},n.prototype.put=function(t,r,n){var o=this;return n||(n={}),this.normalizeRequestOptions(n),e.prototype.put.call(this,t,r,n).map(function(e){return o.configuration.handleResponse(e)}).catch(function(e){return o.configuration.handleError(e)})},n.prototype.delete=function(t,r){var n=this;return r||(r={}),this.normalizeRequestOptions(r),e.prototype.delete.call(this,t,r).map(function(e){return n.configuration.handleResponse(e)}).catch(function(e){return n.configuration.handleError(e)})},n.prototype.request=function(t,r){var n=this;return r||(r={}),this.normalizeRequestOptions(r),e.prototype.request.call(this,t,r).map(function(e){return n.configuration.handleResponse(e)}).catch(function(e){return n.configuration.handleError(e)})},n.prototype.normalizeRequestOptions=function(e){e.headers||(e.headers=new r.Headers),this.addXRequestedWithHeader(e),this.addAuthorizationHeaders(e),this.addAspNetCoreCultureHeader(e),this.addAcceptLanguageHeader(e),this.addTenantIdHeader(e)},n.prototype.addXRequestedWithHeader=function(e){e.headers&&e.headers.append("X-Requested-With","XMLHttpRequest")},n.prototype.addAspNetCoreCultureHeader=function(e){var t=this._utilsService.getCookieValue("Abp.Localization.CultureName");t&&e.headers&&!e.headers.has(".AspNetCore.Culture")&&e.headers.append(".AspNetCore.Culture",t)},n.prototype.addAcceptLanguageHeader=function(e){var t=this._utilsService.getCookieValue("Abp.Localization.CultureName");t&&e.headers&&!e.headers.has("Accept-Language")&&e.headers.append("Accept-Language",t)},n.prototype.addTenantIdHeader=function(e){var t=this._utilsService.getCookieValue("Abp.TenantId");t&&e.headers&&!e.headers.has("Abp.TenantId")&&e.headers.append("Abp.TenantId",t)},n.prototype.addAuthorizationHeaders=function(e){var t=e.headers?e.headers.getAll("Authorization"):null;if(t||(t=[]),!this.itemExists(t,function(e){return 0==e.indexOf("Bearer ")})){var r=this._tokenService.getToken();e.headers&&r&&e.headers.append("Authorization","Bearer "+r)}},n.prototype.itemExists=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return!0;return!1},n.decorators=[{type:t.Injectable}],n.ctorParameters=function(){return[{type:r.XHRBackend},{type:r.RequestOptions},{type:v}]},n}(r.Http),A=function(){function e(e){this._http=e}return e.prototype.initialize=function(){this._http.get("/AbpUserConfiguration/GetAll").subscribe(function(e){jQuery.extend(!0,abp,e.json())})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:r.Http}]},e}(),_={provide:r.Http,useFactory:u,deps:[r.XHRBackend,r.RequestOptions,v]},E=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.HttpModule,r.JsonpModule],declarations:[],providers:[i,s,p,c,l,f,d,h,g,A,v,_,b,y]}]}],e.ctorParameters=function(){return[]},e}();e.AbpModule=E,Object.defineProperty(e,"__esModule",{value:!0})});